"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.confirm = exports.result = exports.error = exports.warn = exports.info = exports.debug = exports.trace = void 0;
/**
 * Produce an IoMessageMaker for the provided level and code info.
 */
function message(level, details) {
    const maker = (text, data) => ({
        time: new Date(),
        level,
        code: details.code,
        message: text,
        data,
    });
    return {
        ...details,
        level,
        msg: maker,
        is: (m) => m.code === details.code,
    };
}
const trace = (details) => message('trace', details);
exports.trace = trace;
const debug = (details) => message('debug', details);
exports.debug = debug;
const info = (details) => message('info', details);
exports.info = info;
const warn = (details) => message('warn', details);
exports.warn = warn;
const error = (details) => message('error', details);
exports.error = error;
const result = (details) => message('result', details);
exports.result = result;
/**
 * Produce an IoRequestMaker for the provided level and request info.
 */
function request(level, details) {
    const maker = (text, data) => ({
        time: new Date(),
        level,
        code: details.code,
        message: text,
        data,
        defaultResponse: details.defaultResponse,
    });
    return {
        ...details,
        level,
        req: maker,
    };
}
/**
 * A request that is a simple yes/no question, with the expectation that 'yes' is the default.
 */
const confirm = (details) => request('info', {
    ...details,
    defaultResponse: true,
});
exports.confirm = confirm;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZS1tYWtlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hcGkvaW8vcHJpdmF0ZS9tZXNzYWdlLW1ha2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQXNEQTs7R0FFRztBQUNILFNBQVMsT0FBTyxDQUFpQixLQUFxQixFQUFFLE9BQWlCO0lBQ3ZFLE1BQU0sS0FBSyxHQUFHLENBQUMsSUFBWSxFQUFFLElBQU8sRUFBRSxFQUFFLENBQUMsQ0FBQztRQUN4QyxJQUFJLEVBQUUsSUFBSSxJQUFJLEVBQUU7UUFDaEIsS0FBSztRQUNMLElBQUksRUFBRSxPQUFPLENBQUMsSUFBSTtRQUNsQixPQUFPLEVBQUUsSUFBSTtRQUNiLElBQUk7S0FDb0IsQ0FBQSxDQUFDO0lBRTNCLE9BQU87UUFDTCxHQUFHLE9BQU87UUFDVixLQUFLO1FBQ0wsR0FBRyxFQUFFLEtBQVk7UUFDakIsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFxQixFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxPQUFPLENBQUMsSUFBSTtLQUN0RCxDQUFDO0FBQ0osQ0FBQztBQXlCTSxNQUFNLEtBQUssR0FBRyxDQUFpQixPQUFrQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUksT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQTdGLFFBQUEsS0FBSyxTQUF3RjtBQUNuRyxNQUFNLEtBQUssR0FBRyxDQUFpQixPQUFrQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUksT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQTdGLFFBQUEsS0FBSyxTQUF3RjtBQUNuRyxNQUFNLElBQUksR0FBRyxDQUFpQixPQUFrQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUksTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQTNGLFFBQUEsSUFBSSxRQUF1RjtBQUNqRyxNQUFNLElBQUksR0FBRyxDQUFpQixPQUFrQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUksTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQTNGLFFBQUEsSUFBSSxRQUF1RjtBQUNqRyxNQUFNLEtBQUssR0FBRyxDQUFpQixPQUFrQyxFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUksT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQTdGLFFBQUEsS0FBSyxTQUF3RjtBQUNuRyxNQUFNLE1BQU0sR0FBRyxDQUFvQyxPQUEyQixFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUksUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQTNHLFFBQUEsTUFBTSxVQUFxRztBQWdCeEg7O0dBRUc7QUFDSCxTQUFTLE9BQU8sQ0FBcUMsS0FBcUIsRUFBRSxPQUF1QjtJQUNqRyxNQUFNLEtBQUssR0FBRyxDQUFDLElBQVksRUFBRSxJQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDeEMsSUFBSSxFQUFFLElBQUksSUFBSSxFQUFFO1FBQ2hCLEtBQUs7UUFDTCxJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUk7UUFDbEIsT0FBTyxFQUFFLElBQUk7UUFDYixJQUFJO1FBQ0osZUFBZSxFQUFFLE9BQU8sQ0FBQyxlQUFlO0tBQ2IsQ0FBQSxDQUFDO0lBRTlCLE9BQU87UUFDTCxHQUFHLE9BQU87UUFDVixLQUFLO1FBQ0wsR0FBRyxFQUFFLEtBQVk7S0FDbEIsQ0FBQztBQUNKLENBQUM7QUFFRDs7R0FFRztBQUNJLE1BQU0sT0FBTyxHQUFHLENBQW9DLE9BQWdFLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBYSxNQUFNLEVBQUU7SUFDMUosR0FBRyxPQUFPO0lBQ1YsZUFBZSxFQUFFLElBQUk7Q0FDdEIsQ0FBQyxDQUFDO0FBSFUsUUFBQSxPQUFPLFdBR2pCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBJb01lc3NhZ2UsIElvTWVzc2FnZUNvZGUsIElvTWVzc2FnZUxldmVsIH0gZnJvbSAnLi4vaW8tbWVzc2FnZSc7XG5pbXBvcnQgdHlwZSB7IEFjdGlvbkxlc3NNZXNzYWdlLCBBY3Rpb25MZXNzUmVxdWVzdCB9IGZyb20gJy4vaW8taGVscGVyJztcblxuLyoqXG4gKiBJbmZvcm1hdGlvbiBmb3IgZWFjaCBJTyBNZXNzYWdlIENvZGUuXG4gKi9cbmludGVyZmFjZSBDb2RlSW5mbyB7XG4gIC8qKlxuICAgKiBUaGUgbWVzc2FnZSBjb2RlLlxuICAgKi9cbiAgcmVhZG9ubHkgY29kZTogSW9NZXNzYWdlQ29kZTtcblxuICAvKipcbiAgICogQSBicmllZiBkZXNjcmlwdGlvbiBvZiB0aGUgbWVhbmluZyBvZiB0aGlzIElPIE1lc3NhZ2UuXG4gICAqL1xuICByZWFkb25seSBkZXNjcmlwdGlvbjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgcGF5bG9hZCBpbnRlcmZhY2UsIGlmIGFwcGxpY2FibGUuXG4gICAqIFNvbWUgSW8gTWVzc2FnZXMgaW5jbHVkZSBhIHBheWxvYWQsIHdpdGggYSBzcGVjaWZpYyBpbnRlcmZhY2UuIFRoZSBuYW1lIG9mXG4gICAqIHRoZSBpbnRlcmZhY2UgaXMgc3BlY2lmaWVkIGhlcmUgc28gdGhhdCBpdCBjYW4gYmUgbGlua2VkIHdpdGggdGhlIG1lc3NhZ2VcbiAgICogd2hlbiBkb2N1bWVudGF0aW9uIGlzIGdlbmVyYXRlZC5cbiAgICpcbiAgICogVGhlIGludGVyZmFjZSBfbXVzdF8gYmUgZXhwb3NlZCBkaXJlY3RseSBmcm9tIHRvb2xraXQtbGliLCBzbyB0aGF0IGl0IHdpbGxcbiAgICogaGF2ZSBhIGRvY3VtZW50YXRpb24gcGFnZSBnZW5lcmF0ZWQgKHRoYXQgY2FuIGJlIGxpbmtlZCB0bykuXG4gICAqL1xuICByZWFkb25seSBpbnRlcmZhY2U/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogSW5mb3JtYXRpb24gZm9yIGVhY2ggSU8gTWVzc2FnZVxuICovXG5pbnRlcmZhY2UgTWVzc2FnZUluZm8gZXh0ZW5kcyBDb2RlSW5mbyB7XG4gIC8qKlxuICAgKiBUaGUgbWVzc2FnZSBsZXZlbFxuICAgKi9cbiAgcmVhZG9ubHkgbGV2ZWw6IElvTWVzc2FnZUxldmVsO1xufVxuXG4vKipcbiAqIEFuIGludGVyZmFjZSB0aGF0IGNhbiBwcm9kdWNlIG1lc3NhZ2VzIGZvciBhIHNwZWNpZmljIGNvZGUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSW9NZXNzYWdlTWFrZXI8VD4gZXh0ZW5kcyBNZXNzYWdlSW5mbyB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBtZXNzYWdlIGZvciB0aGlzIGNvZGUsIHdpdGggb3Igd2l0aG91dCBwYXlsb2FkLlxuICAgKi9cbiAgbXNnOiBbVF0gZXh0ZW5kcyBbQWJzZW50RGF0YV0gPyAobWVzc2FnZTogc3RyaW5nKSA9PiBBY3Rpb25MZXNzTWVzc2FnZTxBYnNlbnREYXRhPiA6IChtZXNzYWdlOiBzdHJpbmcsIGRhdGE6IFQpID0+IEFjdGlvbkxlc3NNZXNzYWdlPFQ+O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGdpdmVuIGBJb01lc3NhZ2VgIGluc3RhbmNlIG1hdGNoZXMgdGhlIGN1cnJlbnQgbWVzc2FnZSBkZWZpbml0aW9uXG4gICAqL1xuICBpcyh4OiBJb01lc3NhZ2U8dW5rbm93bj4pOiB4IGlzIElvTWVzc2FnZTxUPjtcbn1cblxuLyoqXG4gKiBQcm9kdWNlIGFuIElvTWVzc2FnZU1ha2VyIGZvciB0aGUgcHJvdmlkZWQgbGV2ZWwgYW5kIGNvZGUgaW5mby5cbiAqL1xuZnVuY3Rpb24gbWVzc2FnZTxUID0gQWJzZW50RGF0YT4obGV2ZWw6IElvTWVzc2FnZUxldmVsLCBkZXRhaWxzOiBDb2RlSW5mbyk6IElvTWVzc2FnZU1ha2VyPFQ+IHtcbiAgY29uc3QgbWFrZXIgPSAodGV4dDogc3RyaW5nLCBkYXRhOiBUKSA9PiAoe1xuICAgIHRpbWU6IG5ldyBEYXRlKCksXG4gICAgbGV2ZWwsXG4gICAgY29kZTogZGV0YWlscy5jb2RlLFxuICAgIG1lc3NhZ2U6IHRleHQsXG4gICAgZGF0YSxcbiAgfSBhcyBBY3Rpb25MZXNzTWVzc2FnZTxUPik7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5kZXRhaWxzLFxuICAgIGxldmVsLFxuICAgIG1zZzogbWFrZXIgYXMgYW55LFxuICAgIGlzOiAobSk6IG0gaXMgSW9NZXNzYWdlPFQ+ID0+IG0uY29kZSA9PT0gZGV0YWlscy5jb2RlLFxuICB9O1xufVxuXG4vKipcbiAqIEEgdHlwZSB0aGF0IGlzIGltcG9zc2libGUgZm9yIGEgdXNlciB0byByZXBsaWNhdGVcbiAqIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgdGhhdCByZXN1bHRzIGFsd2F5cyBoYXZlIGEgcHJvcGVyIHR5cGUgZ2VuZXJpYyBkZWNsYXJlZC5cbiAqL1xuZGVjbGFyZSBjb25zdCBwcml2YXRlS2V5OiB1bmlxdWUgc3ltYm9sO1xuZXhwb3J0IHR5cGUgSW1wb3NzaWJsZVR5cGUgPSB7XG4gIHJlYWRvbmx5IFtwcml2YXRlS2V5XTogdHlwZW9mIHByaXZhdGVLZXk7XG59O1xuXG4vLyBDcmVhdGUgYElvTWVzc2FnZU1ha2VyYHMgZm9yIGEgZ2l2ZW4gbGV2ZWwgYW5kIHR5cGUgY2hlY2sgdGhhdCBjYWxscyB3aXRoIHBheWxvYWQgYXJlIHVzaW5nIHRoZSBjb3JyZWN0IGludGVyZmFjZVxudHlwZSBDb2RlSW5mb01heWJlSW50ZXJmYWNlPFQ+ID0gW1RdIGV4dGVuZHMgW0Fic2VudERhdGFdID8gT21pdDxDb2RlSW5mbywgJ2ludGVyZmFjZSc+IDogUmVxdWlyZWQ8Q29kZUluZm8+O1xuXG4vKipcbiAqIFRoZSB0eXBlIHdlIHVzZSB0byByZXByZXNlbnQgYW4gYWJzZW50IGRhdGEgZmllbGRcbiAqXG4gKiBUaGlzIGlzIGhlcmUgdG8gbWFrZSBpdCBlYXN5IHRvIGNoYW5nZSBiZXR3ZWVuIGB1bmRlZmluZWRgLCBgdm9pZGBcbiAqIGFuZCBgbmV2ZXJgLlxuICpcbiAqIE5vdCBhIGxvdCBvZiBkaWZmZXJlbmNlIGJldHdlZW4gYHVuZGVmaW5lZGAgYW5kIGB2b2lkYCwgYnV0IGB2b2lkYFxuICogcmVhZHMgYmV0dGVyLlxuICovXG50eXBlIEFic2VudERhdGEgPSB2b2lkO1xuXG5leHBvcnQgY29uc3QgdHJhY2UgPSA8VCA9IEFic2VudERhdGE+KGRldGFpbHM6IENvZGVJbmZvTWF5YmVJbnRlcmZhY2U8VD4pID0+IG1lc3NhZ2U8VD4oJ3RyYWNlJywgZGV0YWlscyk7XG5leHBvcnQgY29uc3QgZGVidWcgPSA8VCA9IEFic2VudERhdGE+KGRldGFpbHM6IENvZGVJbmZvTWF5YmVJbnRlcmZhY2U8VD4pID0+IG1lc3NhZ2U8VD4oJ2RlYnVnJywgZGV0YWlscyk7XG5leHBvcnQgY29uc3QgaW5mbyA9IDxUID0gQWJzZW50RGF0YT4oZGV0YWlsczogQ29kZUluZm9NYXliZUludGVyZmFjZTxUPikgPT4gbWVzc2FnZTxUPignaW5mbycsIGRldGFpbHMpO1xuZXhwb3J0IGNvbnN0IHdhcm4gPSA8VCA9IEFic2VudERhdGE+KGRldGFpbHM6IENvZGVJbmZvTWF5YmVJbnRlcmZhY2U8VD4pID0+IG1lc3NhZ2U8VD4oJ3dhcm4nLCBkZXRhaWxzKTtcbmV4cG9ydCBjb25zdCBlcnJvciA9IDxUID0gQWJzZW50RGF0YT4oZGV0YWlsczogQ29kZUluZm9NYXliZUludGVyZmFjZTxUPikgPT4gbWVzc2FnZTxUPignZXJyb3InLCBkZXRhaWxzKTtcbmV4cG9ydCBjb25zdCByZXN1bHQgPSA8VCBleHRlbmRzIG9iamVjdCA9IEltcG9zc2libGVUeXBlPihkZXRhaWxzOiBSZXF1aXJlZDxDb2RlSW5mbz4pID0+IG1lc3NhZ2U8VD4oJ3Jlc3VsdCcsIGRldGFpbHMpO1xuXG5pbnRlcmZhY2UgUmVxdWVzdEluZm88VT4gZXh0ZW5kcyBDb2RlSW5mbyB7XG4gIHJlYWRvbmx5IGRlZmF1bHRSZXNwb25zZTogVTtcbn1cblxuLyoqXG4gKiBBbiBpbnRlcmZhY2UgdGhhdCBjYW4gcHJvZHVjZSByZXF1ZXN0cyBmb3IgYSBzcGVjaWZpYyBjb2RlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElvUmVxdWVzdE1ha2VyPFQsIFU+IGV4dGVuZHMgTWVzc2FnZUluZm8ge1xuICAvKipcbiAgICogQ3JlYXRlIGEgbWVzc2FnZSBmb3IgdGhpcyBjb2RlLCB3aXRoIG9yIHdpdGhvdXQgcGF5bG9hZC5cbiAgICovXG4gIHJlcTogW1RdIGV4dGVuZHMgW0Fic2VudERhdGFdID8gKG1lc3NhZ2U6IHN0cmluZykgPT4gQWN0aW9uTGVzc01lc3NhZ2U8QWJzZW50RGF0YT4gOiAobWVzc2FnZTogc3RyaW5nLCBkYXRhOiBUKSA9PiBBY3Rpb25MZXNzUmVxdWVzdDxULCBVPjtcbn1cblxuLyoqXG4gKiBQcm9kdWNlIGFuIElvUmVxdWVzdE1ha2VyIGZvciB0aGUgcHJvdmlkZWQgbGV2ZWwgYW5kIHJlcXVlc3QgaW5mby5cbiAqL1xuZnVuY3Rpb24gcmVxdWVzdDxUID0gQWJzZW50RGF0YSwgVSA9IEltcG9zc2libGVUeXBlPihsZXZlbDogSW9NZXNzYWdlTGV2ZWwsIGRldGFpbHM6IFJlcXVlc3RJbmZvPFU+KTogSW9SZXF1ZXN0TWFrZXI8VCwgVT4ge1xuICBjb25zdCBtYWtlciA9ICh0ZXh0OiBzdHJpbmcsIGRhdGE6IFQpID0+ICh7XG4gICAgdGltZTogbmV3IERhdGUoKSxcbiAgICBsZXZlbCxcbiAgICBjb2RlOiBkZXRhaWxzLmNvZGUsXG4gICAgbWVzc2FnZTogdGV4dCxcbiAgICBkYXRhLFxuICAgIGRlZmF1bHRSZXNwb25zZTogZGV0YWlscy5kZWZhdWx0UmVzcG9uc2UsXG4gIH0gYXMgQWN0aW9uTGVzc1JlcXVlc3Q8VCwgVT4pO1xuXG4gIHJldHVybiB7XG4gICAgLi4uZGV0YWlscyxcbiAgICBsZXZlbCxcbiAgICByZXE6IG1ha2VyIGFzIGFueSxcbiAgfTtcbn1cblxuLyoqXG4gKiBBIHJlcXVlc3QgdGhhdCBpcyBhIHNpbXBsZSB5ZXMvbm8gcXVlc3Rpb24sIHdpdGggdGhlIGV4cGVjdGF0aW9uIHRoYXQgJ3llcycgaXMgdGhlIGRlZmF1bHQuXG4gKi9cbmV4cG9ydCBjb25zdCBjb25maXJtID0gPFQgZXh0ZW5kcyBvYmplY3QgPSBJbXBvc3NpYmxlVHlwZT4oZGV0YWlsczogUmVxdWlyZWQ8T21pdDxSZXF1ZXN0SW5mbzxib29sZWFuPiwgJ2RlZmF1bHRSZXNwb25zZSc+PikgPT4gcmVxdWVzdDxULCBib29sZWFuPignaW5mbycsIHtcbiAgLi4uZGV0YWlscyxcbiAgZGVmYXVsdFJlc3BvbnNlOiB0cnVlLFxufSk7XG4iXX0=